<div class="d-flex flex-row ds-value-row"
     [ngClass]="{ 'ds-warning': mdValue.change === DsoEditMetadataChangeTypeEnum.UPDATE, 'ds-danger': mdValue.change === DsoEditMetadataChangeTypeEnum.REMOVE, 'ds-success': mdValue.change === DsoEditMetadataChangeTypeEnum.ADD, 'h-100': isOnlyValue }">
  <div class="flex-grow-1 ds-flex-cell ds-value-cell d-flex align-items-center">
    <div class="dont-break-out preserve-line-breaks" *ngIf="!mdValue.editing">{{ mdValue.newValue.value }}</div>
    <textarea class="form-control" rows="2" *ngIf="mdValue.editing" [(ngModel)]="mdValue.newValue.value"
              [dsDebounce]="300" (onDebounce)="confirm.emit(false)"></textarea>
  </div>
  <div class="ds-flex-cell ds-lang-cell">
    <div class="dont-break-out preserve-line-breaks" *ngIf="!mdValue.editing">{{ mdValue.newValue.language }}</div>
    <input class="form-control" type="text" *ngIf="mdValue.editing" [(ngModel)]="mdValue.newValue.language" />
  </div>
  <div class="text-center ds-flex-cell ds-edit-cell">
    <div class="btn-group edit-field">
      <button class="btn btn-outline-primary btn-sm ng-star-inserted" ngbTooltip="{{ dsoType + '.edit.metadata.edit.buttons.edit' | translate }}" *ngIf="!mdValue.editing"
              [disabled]="mdValue.change === DsoEditMetadataChangeTypeEnum.REMOVE || (saving$ | async)" (click)="edit.emit()">
        <i class="fas fa-edit fa-fw"></i>
      </button>
      <button class="btn btn-outline-success btn-sm ng-star-inserted" ngbTooltip="{{ dsoType + '.edit.metadata.edit.buttons.confirm' | translate }}" *ngIf="mdValue.editing"
              [disabled]="(saving$ | async)" (click)="confirm.emit(true)">
        <i class="fas fa-check fa-fw"></i>
      </button>
      <button class="btn btn-outline-danger btn-sm" ngbTooltip="{{ dsoType + '.edit.metadata.edit.buttons.remove' | translate }}"
              [disabled]="mdValue.change || mdValue.editing || (saving$ | async)" (click)="remove.emit()">
        <i class="fas fa-trash-alt fa-fw"></i>
      </button>
      <button class="btn btn-outline-warning btn-sm" ngbTooltip="{{ dsoType + '.edit.metadata.edit.buttons.undo' | translate }}"
              [disabled]="(!mdValue.change && !mdValue.editing) || (saving$ | async)" (click)="undo.emit()">
        <i class="fas fa-undo-alt fa-fw"></i>
      </button>
      <!-- TODO: Enable drag -->
      <button class="btn btn-outline-secondary ds-drag-handle btn-sm"
              [ngClass]="{'disabled': isOnlyValue || (saving$ | async)}" ngbTooltip="{{ dsoType + '.edit.metadata.edit.buttons.drag' | translate }}" [disabled]="isOnlyValue || (saving$ | async)">
        <i class="fas fa-grip-vertical fa-fw"></i>
      </button>
    </div>
  </div>
</div>
