<div class="{{valueStyle}}">
  <ng-container *ngFor="let attachment of (bitstreams$ | async); let last =last;">
    <hr>
    <div class="row">
      <div class="col-3">
        <ng-container *ngVar="getThumbnailSrc(attachment) | async as thumbnailSrc">
          <div class="inner" *ngIf="!thumbnailSrc" data-test="no-thumbnail-placeholder">
            <div
              class="thumbnail-placeholder d-flex justify-content-center align-items-center text-center w-100 h-100 p-5">
              {{ 'cris-layout.advanced-attachment.no_thumbnail' |
              translate }}</div>
          </div>
          <img class="img-file m-0 d-block w-100" *ngIf="thumbnailSrc" data-test="thumbnail" src="{{ thumbnailSrc }}">
        </ng-container>
      </div>
      <div class="col-5">
        <div class="content" data-test="title" *ngIf="envData?.title">
          <strong>{{ 'cris-layout.advanced-attachment.title' | translate }}</strong>
          <p class="word-break m-0">{{fileName(attachment)}}</p>
        </div>
        <div class="content" data-test="size" *ngIf="envData?.size">
          <strong>{{ 'cris-layout.advanced-attachment.size' | translate }}</strong>
          <p class="word-break m-0">{{getSize(attachment) | dsFileSize}}</p>
        </div>
        <div class="content" data-test="format" *ngIf="envData?.format">
          <strong>{{ 'cris-layout.advanced-attachment.format' | translate }}</strong>
          <p class="word-break m-0">{{getFormat(attachment) | async}}</p>
        </div>
        <div class="content" data-test="type" *ngIf="envData?.type">
          <strong>{{ 'cris-layout.advanced-attachment.type' | translate }}</strong>
          <p class="word-break m-0">{{getType(attachment)}}</p>
        </div>
        <div class="content" data-test="description" *ngIf="getDesc(attachment) && envData?.description">
          <strong>{{ 'cris-layout.advanced-attachment.description' | translate }}</strong>
          <ds-truncatable [id]="attachment.id">
            <ds-truncatable-part [id]="attachment.id" [minLines]="1">
              {{getDesc(attachment)}}
            </ds-truncatable-part>
          </ds-truncatable>
        </div>
      </div>
      <div class="col-4 text-right">
        <ng-container *ngIf="getCanDownload(attachment) | async">
          <ng-container *ngVar="downloadLink(attachment) as downloadLink">
            <a [routerLink]="downloadLink?.routerLink" [queryParams]="downloadLink?.queryParams" class="btn btn-primary"
              data-test="download">{{ 'cris-layout.advanced-attachment.download' | translate }}</a>
          </ng-container>
        </ng-container>
        <ng-container *ngIf="getCanRequestACopy(attachment) | async">
          <ng-container *ngVar="requestACopyLink(attachment) as requestACopyLink">
            <a [routerLink]="requestACopyLink?.routerLink" [queryParams]="requestACopyLink?.queryParams"
              class="btn btn-primary" data-test="requestACopy">{{ 'cris-layout.advanced-attachment.requestACopy' |
              translate }}</a>
          </ng-container>
        </ng-container>
      </div>
    </div>
    <hr *ngIf="last">
  </ng-container>
  <div *ngIf="canViewMore" class="w-100 text-center">
    <button class="btn btn-link" (click)="viewMore()">{{'cris-layout.advanced-attachment.viewMore' |
      translate}}</button>
    <hr>
  </div>
</div>