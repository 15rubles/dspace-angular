<div class="container" *ngVar="(communityRD$ | async) as communityRD">
  <div class="community-page" *ngIf="communityRD?.hasSucceeded" @fadeInOut>
    <div *ngIf="communityRD?.payload; let communityPayload">
      <!-- Community name -->
      <ds-comcol-page-header [name]="communityPayload.name"></ds-comcol-page-header>
      <!-- Community logo -->
      <ds-comcol-page-logo *ngIf="logoRD$"
                           [logo]="(logoRD$ | async)?.payload"
                           [alternateText]="'Community Logo'">
      </ds-comcol-page-logo>
      <!-- Introductory text -->
      <ds-comcol-page-content
        [content]="communityPayload.introductoryText"
        [hasInnerHtml]="true">
      </ds-comcol-page-content>
      <!-- News -->
      <ds-comcol-page-content
        [content]="communityPayload.sidebarText"
        [hasInnerHtml]="true"
        [title]="'community.page.news'">
      </ds-comcol-page-content>
      <!-- Copyright -->
      <ds-comcol-page-content
        [content]="communityPayload.copyrightText"
        [hasInnerHtml]="true">
      </ds-comcol-page-content>
      <form (submit)="patchIt()">
        <div class="row">
          <div class="form-group col col-sm-4">
            <label for="newname">Change Name</label>
            <div class="input-group mb-3">
              <input type="email" class="form-control" id="newname" name="newname"
                     placeholder="Enter a collection name" [(ngModel)]="newname">
              <div class="input-group-append">
                <button class="btn btn-danger" type="submit">Patch!</button>
              </div>
            </div>
          </div>
        </div>
      </form>
      <ds-community-page-sub-collection-list
        [community]="communityPayload"></ds-community-page-sub-collection-list>
    </div>
  </div>
  <ds-error *ngIf="communityRD?.hasFailed" message="{{'error.community' | translate}}"></ds-error>
  <ds-loading *ngIf="communityRD?.isLoading"
              message="{{'loading.community' | translate}}"></ds-loading>
</div>
