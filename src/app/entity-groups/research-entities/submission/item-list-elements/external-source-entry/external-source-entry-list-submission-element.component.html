<div class="d-inline-block">
  <div class="lead item-list-title dont-break-out text-info">{{object.display}}</div>
  <div *ngIf="uri"><a target="_blank" [href]="uri.value">{{uri.value}}</a></div>
  <div *ngIf="issued || contributors?.length" data-test="issued-contributor" class="d-flex align-items-center text-muted">
    <span *ngIf="issued" data-test="issued" class="item-list-date">({{issued.value | date: 'YYYY-MM-dd'}})&nbsp;</span>
    <ds-truncatable *ngIf="contributors?.length" [id]="object.id">
      <ds-truncatable-part [id]="object.id" [minLines]="1">
        <span *ngFor="let contributor of contributors; let last=last;" data-test="contributors" class="item-list-authors">
          {{contributor.value}}<span *ngIf="!last">; </span>
        </span>
      </ds-truncatable-part>
    </ds-truncatable>
  </div>
  <div *ngIf="abstract" data-test="abstract" class="item-list-abstract">
    <ds-truncatable [id]="object.id">
      <ds-truncatable-part [id]="object.id" [minLines]="3">
        <span>{{abstract.value}}</span>
      </ds-truncatable-part>
    </ds-truncatable>
  </div>
  <div *ngIf="identifiers?.length" data-test="identifiers" class="text-muted">
    <ds-truncatable [id]="object.id">
      <ds-truncatable-part [id]="object.id" [minLines]="1">
        <span *ngFor="let identifier of identifiers; let last=last">
          {{identifier.value}}<span *ngIf="!last">; </span>
        </span>
      </ds-truncatable-part>
    </ds-truncatable>
  </div>
  <div *ngIf="object?.matchObjects?.length > 0">
    <ngb-accordion #acc="ngbAccordion">
      <ngb-panel [id]="object.id">
        <ng-template ngbPanelHeader>
          <div class="w-100 d-flex collapse-toggle" ngbPanelToggle (click)="acc.toggle(object.id)">
            <button type="button" class="btn btn-link p-0" (click)="$event.preventDefault()"
              [attr.aria-expanded]="!acc.isExpanded(object.id)" aria-controls="collapsePanels">
              <span class="badge badge-secondary">
                {{ object.matchObjects.length }}
              </span>
              {{'submission.sections.external-source.duplicate-matches.header' | translate}}
            </button>
          </div>
        </ng-template>
        <ng-template ngbPanelContent>
          <span *ngFor="let match of object.matchObjects; let isLast = last;" class="d-flex mb-1 align-items-center">
            <a data-test="matchObjectsLink" target="_blank" [routerLink]="[itemPagePath, match.uuid]" class="d-flex"
              [title]="match.name">
              <span class="text-wrap">
                {{ match.name }}
              </span>
              <span *ngIf="match.handle" class="text-muted small">({{match.handle}})</span>
              <span *ngIf="!match.handle" class="text-muted small">({{match.uuid}})</span>
            </a>
            <span class="badge badge-warning ml-2" *ngIf="match.isWithdrawn">
              {{ "submission.sections.external-source.duplicate-matches.item.isWithdrawn" | translate }}
            </span>
            <span class="badge badge-warning ml-2" *ngIf="!match.isArchived">
              {{ "submission.sections.external-source.duplicate-matches.item.not-archived" | translate }}
            </span>
          </span>
        </ng-template>
      </ngb-panel>
    </ngb-accordion>
  </div>
</div>
