<div *ngIf="(getResourcePolicies() | async)?.length > 0">
  <table class="table table-striped table-bordered table-hover">
    <thead>
      <tr>
        <th colspan="9">
          <div class="d-flex justify-content-between align-items-center m-0">
            {{ 'resource-policies.table.headers.title.for.' + resourceType | translate }} {{resourceUUID}}
            <div>
              <button class="btn btn-outline-primary float-right ml-1"
                      [disabled]="(!(canDelete() | async)) || (isProcessingDelete() | async)"
                      (click)="deleteSelectedResourcePolicies()">
                <span *ngIf="(isProcessingDelete() | async)">
                  <i class='fas fa-circle-notch fa-spin'></i> {{'submission.workflow.tasks.generic.processing' | translate}}
                </span>
                <span *ngIf="!(isProcessingDelete() | async)">
                  {{'resource-policies.delete.btn' | translate}}
                </span>
              </button>
              <button class="btn btn-outline-primary float-right"
                      [disabled]="(isProcessingDelete() | async)"
                      (click)="redirectToResourcePolicyCreatePage()">
                {{'resource-policies.add.for.' + resourceType | translate}}
              </button>
            </div>
          </div>
        </th>
      </tr>
      <tr class="text-center">
        <th>
          <div class="custom-control custom-checkbox">
            <input type="checkbox"
                   class="custom-control-input"
                   [id]="'selectAll_' + resourceUUID"
                   (change)="selectAllCheckbox($event)">
            <label class="custom-control-label" [for]="'selectAll_' + resourceUUID"></label>
          </div>
        </th>
        <th>{{'resource-policies.table.headers.id' | translate}}</th>
        <th>{{'resource-policies.table.headers.name' | translate}}</th>
        <th>{{'resource-policies.table.headers.policyType' | translate}}</th>
        <th>{{'resource-policies.table.headers.action' | translate}}</th>
        <th>{{'resource-policies.table.headers.eperson' | translate}}</th>
        <th>{{'resource-policies.table.headers.group' | translate}}</th>
        <th>{{'resource-policies.table.headers.date.start' | translate}}</th>
        <th>{{'resource-policies.table.headers.date.end' | translate}}</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let entry of (getResourcePolicies() | async); trackById">
        <td class="text-center">
          <div class="custom-control custom-checkbox">
            <input type="checkbox"
                   class="custom-control-input"
                   [id]="entry.id"
                   [ngModel]="entry.checked"
                   (ngModelChange)="selectCheckbox(entry, $event)">
            <label class="custom-control-label" [for]="entry.id"></label>
          </div>
        </td>
        <th scope="row">
          {{entry.id}}
          <button class="btn btn-link pt-0 pb-0" (click)="redirectToResourcePolicyEditPage(entry.policy)">
            {{'resource-policies.table.headers.edit' | translate}}
          </button>
        </th>
        <td>{{entry.policy.name}}</td>
        <td>{{entry.policy.policyType}}</td>
        <td>{{entry.policy.action}}</td>
        <td *ngIf="(hasEPerson(entry.policy) | async)">
          {{getEPersonName(entry.policy) | async}}
        </td>
        <td *ngIf="!(hasEPerson(entry.policy) | async)"></td>
        <td *ngIf="(hasGroup(entry.policy) | async)">
          {{getGroupName(entry.policy) | async}}
          <button class="btn btn-link pt-0 pb-0" (click)="redirectToGroupEditPage(entry.policy)">
            {{'resource-policies.table.headers.edit' | translate}}
          </button>
        </td>
        <td *ngIf="!(hasGroup(entry.policy) | async)"></td>
        <td>{{formatDate(entry.policy.startDate)}}</td>
        <td>{{formatDate(entry.policy.endDate)}}</td>
      </tr>
    </tbody>
  </table>
</div>
