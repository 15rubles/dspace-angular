<div class="mb-3">
  <a [class.disabled]="!(task.workflowitem | async)?.hasSucceeded"
     class="btn btn-primary mt-1 mb-3"
     ngbTooltip="{{'submission.workflow.tasks.claimed.edit_help' | translate}}"
     [attr.href]="'/workflowitems/' + (task.workflowitem | async)?.payload[0].id + '/edit'"
     role="button">
    <i class="fa fa-edit"></i> {{'submission.workflow.tasks.claimed.edit' | translate}}
  </a>

  <button type="button"
          class="btn btn-success mt-1 mb-3"
          ngbTooltip="{{'submission.workflow.tasks.claimed.approve_help' | translate}}"
          [disabled]="processingApprove"
          (click)="approve()">
    <span *ngIf="processingApprove"><i class='fa fa-circle-o-notch fa-spin'></i> {{'submission.workflow.tasks.generic.processing' | translate}}</span>
    <span *ngIf="!processingApprove"><i class="fa fa-thumbs-up"></i> {{'submission.workflow.tasks.claimed.approve' | translate}}</span>
  </button>

  <ng-template #rejectTipContent><p [innerHTML]="'submission.workflow.tasks.claimed.reject_help' | translate"></p></ng-template>
  <button class="btn btn-danger mt-1 mb-3"
          [ngbTooltip]="rejectTipContent"
          [disabled]="processingReject"
          (click)="openRejectModal(rejectModal)" >
    <span *ngIf="processingReject"><i class='fa fa-circle-o-notch fa-spin'></i> {{'submission.workflow.tasks.generic.processing' | translate}}</span>
    <span *ngIf="!processingReject"><i class="fa fa-trash"></i> {{'submission.workflow.tasks.claimed.reject.submit' | translate}}</span>
  </button>

  <button type="button"
          class="btn mt-1 mb-3"
          ngbTooltip="{{'submission.workflow.tasks.claimed.return_help' | translate}}"
          [disabled]="processingReturnToPool"
          (click)="returnToPool()">
    <span *ngIf="processingReturnToPool"><i class='fa fa-circle-o-notch fa-spin'></i> {{'submission.workflow.tasks.generic.processing' | translate}}</span>
    <span *ngIf="!processingReturnToPool"><i class="fa fa-undo"></i> {{'submission.workflow.tasks.claimed.return' | translate}}</span>
  </button>

  <ds-message-board
    [dso]="workflowitemObs | async"
    (refresh)="refresh()">
  </ds-message-board>

</div>

<ng-template #rejectModal let-c="close" let-d="dismiss">
  <div class="modal-header">
    <h4 class="modal-title">{{'submission.workflow.tasks.claimed.reject.reason.title' | translate}}</h4>
    <button type="button"
            class="close"
            aria-label="Close"
            (click)="d('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <div class="alert alert-info" role="alert">
      {{'submission.workflow.tasks.claimed.reject.reason.info' | translate}}
    </div>
    <form (ngSubmit)="reject(rejectModal);" [formGroup]="rejectForm" >
    <textarea
      style="width: 100%"
      formControlName="reason"
      rows="4"
      placeholder="{{'submission.workflow.tasks.claimed.reject.reason.placeholder' | translate}}"></textarea>
      <button
        id="btn-chat"
        class="btn btn-danger btn-lg btn-block mt-3"
        [disabled]="!rejectForm.valid || processingReject"
        type="submit">
        <span *ngIf="processingReject"><i class='fa fa-circle-o-notch fa-spin'></i> {{'submission.workflow.tasks.generic.processing' | translate}}</span>
        <span *ngIf="!processingReject">{{'submission.workflow.tasks.claimed.reject.reason.submit' | translate}}</span>
      </button>
    </form>
  </div>
</ng-template>
