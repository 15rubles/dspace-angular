<script src="search-range-filter.component.ts"></script>
<div>
    <div class="filters">
        <form #form="ngForm" (ngSubmit)="onSubmit(form.value)" class="add-filter row"
              [action]="getCurrentUrl()">
            <div class="col-6">
                <input type="text" [ngModel]="range[0]" [name]="filterConfig.paramName + '.min'"
                       class="form-control" (blur)="onSubmit(form.value)"
                       aria-label="Mininum value"
                       [placeholder]="'search.filters.filter.' + filterConfig.name + '.min.placeholder'| translate"/>
            </div>
            <div class="col-6">
                <input type="text" [ngModel]="range[1]" [name]="filterConfig.paramName + '.max'"
                       class="form-control" (blur)="onSubmit(form.value)"
                       aria-label="Maximum value"
                       [placeholder]="'search.filters.filter.' + filterConfig.name + '.max.placeholder'| translate"/>
            </div>
            <input type="submit" class="d-none"/>
        </form>
        <nouislider [connect]="true" [min]="min" [max]="max" [step]="1"
                    [(ngModel)]="range" (mouseup)="onSubmit(form.value)" ngDefaultControl></nouislider>

        <ng-container *ngFor="let page of (filterValues$ | async)">
            <ng-container *ngFor="let value of (page | async)?.payload.page">
                <a *ngIf="!selectedValues.includes(value.value)" class="d-block clearfix"
                   [routerLink]="[getSearchLink()]"
                   [queryParams]="getAddParams(value.value)" queryParamsHandling="merge">
                    <span class="filter-value">{{value.value}}</span>
                    <span class="float-right filter-value-count">
                        <span class="badge badge-secondary badge-pill">{{value.count}}</span>
                    </span>
                </a>
            </ng-container>
        </ng-container>
    </div>
</div>