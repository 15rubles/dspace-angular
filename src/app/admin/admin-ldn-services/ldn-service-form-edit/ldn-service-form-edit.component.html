<form (ngSubmit)="submitForm()" [formGroup]="formModel">

    <div class="form-group">

        <!-- In the name section -->
        <label for="name">{{ 'ldn-edit-service.form.label.name' | translate }}</label>
        <input formControlName="name" id="name" name="name" placeholder="{{ 'ldn-edit-service.form.label.name' | translate }}" required
               type="text">
    </div>

    <!-- In the description section -->
    <div class="form-group">
        <label for="description">{{ 'ldn-edit-service.form.label.description' | translate }}</label>
        <input formControlName="description" id="description" name="description" placeholder="{{ 'ldn-edit-service.form.label.description' | translate }}"
               required type="text">
    </div>

    <!-- In the url section -->
    <div class="form-group">
        <label for="url">{{ 'ldn-edit-service.form.label.url' | translate }}</label>
        <input formControlName="url" id="url" name="url" placeholder="{{ 'ldn-edit-service.form.label.url' | translate }}" required type="text">
    </div>

    <!-- In the ldnUrl section -->
    <div class="form-group">
        <label for="ldnUrl">{{ 'ldn-edit-service.form.label.ldnUrl' | translate }}</label>
        <input formControlName="ldnUrl" id="ldnUrl" name="ldnUrl" placeholder="{{ 'ldn-edit-service.form.label.ldnUrl' | translate }}"
               required type="text">
    </div>

    <!-- In the Inbound Patterns section -->
    <div *ngFor="let patternGroup of formModel.get('notifyServiceInboundPatterns')['controls']; let i = index" class="form-group"
         formGroupName="notifyServiceInboundPatterns">

        <ng-container [formGroupName]="i">

            <label for="additionalInboundPattern{{i}}">{{ 'ldn-edit-service.form.label.inboundPattern' | translate }} {{ i + 1 }}</label>

            <select #inboundPattern formControlName="pattern" id="additionalInboundPattern{{i}}"
                    name="additionalInboundPattern{{i}}" required>

                <option value="">{{ 'ldn-edit-service.form.label.noInboundPatternSelected' | translate }}</option>
                <option *ngFor="let pattern of inboundPatterns" [ngValue]="pattern.name">{{ pattern.name }}</option>

            </select>

            <div *ngIf="inboundPattern.value" class="form-group">

                <label for="constraint{{i}}">{{ 'ldn-edit-service.form.label.selectedItemFilter' | translate }}</label>

                <select formControlName="constraint" id="constraint{{i}}" name="constraint{{i}}">

                    <option value="">{{ 'ldn-edit-service.form.label.selectItemFilter' | translate }}</option>
                    <option *ngFor="let itemFilter of itemFilterList"
                            [value]="itemFilter.name">{{ itemFilter.name }}</option>

                </select>

                <div class="form-group">
                    <label for="automatic{{i}}">{{ 'ldn-edit-service.form.label.automatic' | translate }}</label>
                    <input type="checkbox" formControlName="automatic" id="automatic{{i}}" name="automatic{{i}}">
                </div>

            </div>

            <button *ngIf="i > 0" (click)="removeInboundPattern(patternGroup)" class="btn btn-outline-dark">
                <i class="fas fa-trash"></i>
            </button>
        </ng-container>

    </div>

    <span (click)="addInboundPattern()" class="add-pattern-link">{{ 'ldn-edit-service.form.label.addInboundPattern' | translate }}</span>

    <!-- In the Outbound Patterns section -->
    <div *ngFor="let patternGroup of formModel.get('notifyServiceOutboundPatterns')['controls']; let i = index" class="form-group"
         formGroupName="notifyServiceOutboundPatterns">

        <ng-container [formGroupName]="i">

            <label for="additionalOutboundPattern{{i}}">{{ 'ldn-edit-service.form.label.outboundPattern' | translate }} {{ i + 1 }}</label>

            <select #outboundPattern formControlName="pattern" id="additionalOutboundPattern{{i}}" name="additionalOutboundPattern{{i}}"
                    required>

                <option value="">{{ 'ldn-edit-service.form.label.noOutboundPatternSelected' | translate }}</option>
                <option *ngFor="let pattern of outboundPatterns" [ngValue]="pattern.name">{{ pattern.name }}</option>

            </select>

            <div *ngIf="outboundPattern.value" class="form-group">

                <label for="constraint{{i}}">{{ 'ldn-edit-service.form.label.selectedItemFilter' | translate }}</label>

                <select formControlName="constraint" id="constraint{{i}}" name="constraint{{i}}">

                    <option value="">{{ 'ldn-edit-service.form.label.selectItemFilter' | translate }}</option>
                    <option *ngFor="let itemFilter of itemFilterList"
                            [value]="itemFilter.name">{{ itemFilter.name }}</option>

                </select>

            </div>

            <button *ngIf="i > 0" (click)="removeOutboundPattern(patternGroup)" class="btn btn-outline-dark">
                <i class="fas fa-trash"></i>
            </button>

        </ng-container>

    </div>

    <span (click)="addOutboundPattern()" class="add-pattern-link">{{ 'ldn-edit-service.form.label.addOutboundPattern' | translate }}</span>

    <button class="btn btn-primary" type="submit">{{ 'ldn-edit-service.form.label.submit' | translate }}</button>

</form>
